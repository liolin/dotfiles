#!/bin/bash

getDefaultSinkName() {
    pacmd stat | awk -F": " '/^Default sink name: /{print $2}'
}

getDefaultSinkVol() {
    pacmd list-sinks |
        awk '/^\s+name: /{indefault = $2 == "<'$(getdefaultsinkname)'>"}
            /^\s+volume: / && indefault {print $5; exit}'
}

toggleMuteDefaultSink() {
    pactl set-sink-mute $(getDefaultSinkName) toggle
}

raiseDefaultSinkVol() {
    pactl set-sink-volume $(getDefaultSinkName) +5%
}

lowerDefaultSinkVol() {
    pactl set-sink-volume $(getDefaultSinkName) -5%
}

for i in "$@"; do
    case $i in
        -m|--mute=*)
            toggleMuteDefaultSink
            shift # past argument=value
            ;;
        -r|--raise)
            raiseDefaultSinkVol
            shift # past argument=value
            ;;
        -l|--lower)
            lowerDefaultSinkVol
            shift # past argument=value
            ;;
        *)
            # unknown option
            ;;
    esac
done
